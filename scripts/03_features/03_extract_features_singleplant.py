import argparsefrom pathlib import Pathimport pandas as pdfrom src.pamflow.io.multiframe import load_multiframe_tifffrom src.pamflow.features.summary import summarize_framedef main():    parser = argparse.ArgumentParser()    parser.add_argument("--tif", required=True)    parser.add_argument("--out", default="data/processed/features_singleplant.csv")    parser.add_argument("--sample-id", default=None)    parser.add_argument("--mask", choices=["all", "nonzero"], default="nonzero")    args = parser.parse_args()    # Load frame mapping    frames_map = pd.read_csv("data/metadata/frames_map.csv")    mapping = dict(zip(frames_map["frame_index"], frames_map["parameter"]))    # Load image stack    stack = load_multiframe_tiff(args.tif)    rows = []    for i in range(stack.shape[0]):        stats = summarize_frame(stack[i], mask_mode=args.mask)        row = {            "file": Path(args.tif).name,            "frame_index": i,            "parameter": mapping.get(i, None),            **stats,            "sample_id": args.sample_id,        }        rows.append(row)    df = pd.DataFrame(rows)    out_path = Path(args.out)    out_path.parent.mkdir(parents=True, exist_ok=True)    df.to_csv(out_path, index=False)    print(f"Wrote {out_path}")    print(df.head())if __name__ == "__main__":    main()